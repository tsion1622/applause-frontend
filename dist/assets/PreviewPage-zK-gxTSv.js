import{e as x,r as n,j as e,d as o,b as c,c as h,u as j}from"./index-C033NPT0.js";import{u as d}from"./useQuery-O-qZ9aku.js";import{C as f,a as g}from"./Card-BcSRCw2q.js";/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=x("MessageSquareQuote",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 12a2 2 0 0 0 2-2V8H8",key:"1jfesj"}],["path",{d:"M14 12a2 2 0 0 0 2-2V8h-2",key:"1dq9mh"}]]),y=({children:a,palette:s})=>{const[r,i]=n.useState("iPhone 15 Pro"),t={backgroundColor:(s==null?void 0:s.background)||"#FFFFFF",color:(s==null?void 0:s.text_dark)||"#000000"};return e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"relative mx-auto border-gray-800 dark:border-gray-800 bg-gray-800 border-[14px] rounded-[2.5rem] h-[600px] w-[300px] shadow-xl",children:[e.jsx("div",{className:"w-[140px] h-[28px] bg-gray-800 top-0 rounded-b-xl left-1/2 -translate-x-1/2 absolute"}),e.jsx("div",{className:"rounded-[2rem] overflow-hidden w-full h-full bg-white dark:bg-gray-800",children:e.jsx("div",{style:t,className:"w-full h-full p-4",children:a})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("select",{value:r,onChange:l=>i(l.target.value),className:"w-full bg-gray-700 bg-opacity-30 text-soft-white p-3 rounded-lg focus:border-ion-blue focus:ring-0 focus:outline-none",children:[e.jsx("option",{value:"iPhone 15 Pro",children:"iPhone 15 Pro"}),e.jsx("option",{value:"Google Pixel 8",children:"Google Pixel 8"}),e.jsx("option",{value:"Samsung Galaxy S24",children:"Samsung Galaxy S24"})]})})]})},b=async a=>{const{data:s}=await c.get(`/projects/${a}/testimonials/`);return s},v=({projectId:a})=>{const{data:s,isLoading:r,isError:i}=d({queryKey:["testimonials",a],queryFn:()=>b(a)});if(r)return e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(o,{className:"animate-spin"})});if(i||!s||s.length===0)return e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No testimonials available yet."})});const t=s[0];return e.jsx(f,{className:"m-4",children:e.jsxs(g,{className:"p-6 text-center",children:[e.jsx(p,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("p",{className:"text-lg italic",children:['"',t.content,'"']}),e.jsxs("footer",{className:"mt-4 font-semibold text-gray-600",children:["- ",t.user.username]})]})})},N=async a=>{const{data:s}=await c.get(`/projects/${a}/`);return s},T=()=>{const{id:a}=h(),s=j(),[r,i]=n.useState(!1),{data:t,isLoading:l,isError:u}=d({queryKey:["projectPreview",a],queryFn:()=>N(a),enabled:!!a});return n.useEffect(()=>{const m=setTimeout(()=>{i(!0)},5e3);return()=>clearTimeout(m)},[]),l?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(o,{className:"h-16 w-16 animate-spin text-ion-blue"})}):u||!t?(s("/dashboard"),null):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4",children:["Preview: ",t.name]}),e.jsx(y,{palette:t.brand_palette,children:r?e.jsx(v,{projectId:t.id}):e.jsxs("div",{className:"p-4",children:[e.jsxs("h2",{className:"text-xl font-bold",children:["Welcome to ",t.name]}),e.jsx("p",{children:"This is a preview of your application."})]})})]})};export{T as default};

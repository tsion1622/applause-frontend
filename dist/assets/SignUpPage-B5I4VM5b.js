import{u as f,j as e,B as w,L as b,b as y}from"./index-C033NPT0.js";import{u as P,F as C,a as o,b as n,c as t,d as i,e as l,t as F,o as S,s as m}from"./form-BEdHVrYh.js";import{I as c}from"./Input-CsQmvcEd.js";import{u as j}from"./index-b5uPlb3-.js";const v=S({email:m().email({message:"Please enter a valid email address."}),username:m().min(2,{message:"Username must be at least 2 characters long."}),password:m().min(8,{message:"Password must be at least 8 characters long."}),confirmPassword:m()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),R=()=>{const a=f(),r=P({resolver:F(v),defaultValues:{email:"",username:"",password:"",confirmPassword:""}}),p=async s=>{var d,x,u;try{await y.post("/users/register/",{email:s.email,username:s.username,password:s.password}),j.success("Registration successful! Please log in."),a("/login")}catch(h){console.error("Registration failed:",h);const g=((u=(x=(d=h.response)==null?void 0:d.data)==null?void 0:x.email)==null?void 0:u[0])||"Registration failed. Please try again.";j.error(g)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Create an Account"}),e.jsx(C,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(p),className:"space-y-6",children:[e.jsx(o,{control:r.control,name:"username",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Username"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Choose a username",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"email",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Email"}),e.jsx(i,{children:e.jsx(c,{placeholder:"Enter your email",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"password",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Password"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"Create a password",...s})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"confirmPassword",render:({field:s})=>e.jsxs(n,{children:[e.jsx(t,{children:"Confirm Password"}),e.jsx(i,{children:e.jsx(c,{type:"password",placeholder:"Confirm your password",...s})}),e.jsx(l,{})]})}),e.jsx(w,{type:"submit",className:"w-full",disabled:r.formState.isSubmitting,children:r.formState.isSubmitting?"Creating Account...":"Create Account"})]})}),e.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Already have an account?"," ",e.jsx(b,{to:"/login",className:"font-medium text-indigo-600 hover:underline",children:"Log In"})]})]})})};export{R as default};

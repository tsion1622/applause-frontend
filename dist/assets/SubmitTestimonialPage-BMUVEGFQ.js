import{c as m,u as c,j as s,B as l,b as u}from"./index-C033NPT0.js";import{u as d,F as j,a as x,b as p,c as b,d as f,e as h,t as g,o as T,s as F}from"./form-BEdHVrYh.js";import{u as S}from"./useMutation-BBYY9Llb.js";import{C as y,c as C,d as w,a as k}from"./Card-BcSRCw2q.js";import{T as v}from"./textarea-BaCDY8Kw.js";import{u as n}from"./index-b5uPlb3-.js";const N=T({content:F().min(10,{message:"Testimonial must be at least 10 characters long."})}),P=async({projectId:e,content:o})=>{const{data:t}=await u.post(`/projects/${e}/testimonials/`,{content:o});return t},L=()=>{const{projectId:e}=m(),o=c(),t=S({mutationFn:P,onSuccess:()=>{n.success("Thank you for your feedback!"),o(`/project/${e}`)},onError:a=>{n.error(`Submission failed: ${a.message}`)}}),r=d({resolver:g(N),defaultValues:{content:""}}),i=a=>{e&&t.mutate({...a,projectId:e})};return s.jsx("div",{className:"container mx-auto flex justify-center items-center p-4",children:s.jsxs(y,{className:"w-full max-w-lg",children:[s.jsx(C,{children:s.jsx(w,{children:"Submit a Testimonial"})}),s.jsx(k,{children:s.jsx(j,{...r,children:s.jsxs("form",{onSubmit:r.handleSubmit(i),className:"space-y-6",children:[s.jsx(x,{control:r.control,name:"content",render:({field:a})=>s.jsxs(p,{children:[s.jsx(b,{children:"Your Feedback"}),s.jsx(f,{children:s.jsx(v,{placeholder:"Tell us what you think...",rows:5,...a})}),s.jsx(h,{})]})}),s.jsx(l,{type:"submit",disabled:t.isPending,children:t.isPending?"Submitting...":"Submit Testimonial"})]})})})]})})};export{L as default};
